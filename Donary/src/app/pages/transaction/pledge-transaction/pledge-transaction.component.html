<div class="card" ngbAutofocus tabindex="-1">
    <div class="card-body pledge-transaction">
        <div class="filters__options">
            <div class="search_opts flex-fill">
                <div class="input-group search_input">
                    <input type="text" name="advanceSearch" class="form-control float-right" id="pldg_localsearch"
                        placeholder="Search Pledge" (keyup)="search($event.target.value)">
                </div>
                <div class="input-group filter_field">

                    <button type="button" (click)="openAdvanceSearchFilterPopup()" class="btn btn-default">
                        <img src="/assets/dist/img/icon-filter.svg" alt="" class="hidden-desktop" />
                        <span class="filter_count" *ngIf="filtercount!=0">{{filtercount}}</span>
                        <span class="filter_text">{{'FILTER' |translate}}</span>
                    </button>
                </div>
                <ng-container *appIsWeb>
                    <div class="subby_dropdown">
                        <span>{{'SUMBY' |translate}}:</span>
                        <div class="custo_selct">
                            <angular2-multiselect id="ddlCardType"
                                [settings]="commonMethodService.setDropDownSettings('',1,false,true,true)"
                                [data]="cardFilter" (onSelect)="cardTypeChange(cardType)" [(ngModel)]="cardType">
                                <c-item>
                                    <ng-template let-item="item">
                                        <label>{{item.itemName}}</label>
                                        <span class="count_span">({{item.counts}})</span>
                                    </ng-template>
                                </c-item>
                            </angular2-multiselect>
                        </div>
                    </div>
                    <div class="sort_sumcard">
                        <span class="sorting_icon"></span>
                        <div class="custo_selct sort_drpdown">
                            <angular2-multiselect id="ddlCardType"
                                [settings]="commonMethodService.setDropDownSettings('',1,false,true,true)"
                                [data]="sortFilter" (onSelect)="changeSortType(sortType)" [(ngModel)]="sortType">
                            </angular2-multiselect>
                        </div>
                    </div>
                </ng-container>
                <ng-template #popContent><app-common-hebrew-english-calendar [pageName]="PageName"
                        [data]="selectedDateRange" [isOneDate]="isOneDate"></app-common-hebrew-english-calendar>
                </ng-template>
                <div class="input-group date_picker" id="datehebwrapper" popoverClass="calender-modal"
                    [ngbPopover]="popContent" [popoverTitle]="popTitle" [autoClose]="false"
                    placement="bottom left right start end bottom-start bottom-end end-top end-bottom"
                    (clickOutside)="onClickedOutsidePopover(p1)" container="body" #p1="ngbPopover"
                    (click)="openHebrewCalendarPopup()" id="pledgeTransactionCalender">
                    <input type="text" class="form-control" value="" [placeholder]="EngHebCalPlaceholder" />
                    <div class="input-group-append">
                        <span class="input-group-text">
                            <i class="far fa-calendar-alt ngx-daterangepicker-action"></i>
                        </span>
                    </div>
                </div>
                <div class="input-group date_picker" id="datewrapper" *ngIf="false">
                    <input type="text" class="form-control" #calendarsearch ngxDaterangepickerMd
                        [(ngModel)]="selectedDateRange"
                        [showCustomRangeLabel]="commonMethodService.showCustomRangeLabel"
                        [alwaysShowCalendars]="commonMethodService.alwaysShowCalendars"
                        [ranges]="commonMethodService.isHebrew==true?commonMethodService.hebranges:commonMethodService.ranges"
                        [locale]="commonMethodService.isHebrew==true?commonMethodService.heblocale:commonMethodService.locale"
                        [linkedCalendars]="commonMethodService.linkedCalendars"
                        [showRangeLabelOnInput]="commonMethodService.showRangeLabelOnInput"
                        [opens]="commonMethodService.open" [drops]="commonMethodService.drop"
                        [showClearButton]="commonMethodService.showClearButton"
                        [placeholder]="commonMethodService.placeholder" />
                    <div class="input-group-append">
                        <span class="input-group-text">
                            <i class="far fa-calendar-alt ngx-daterangepicker-action" (click)="CalendarFocus()"></i>
                        </span>
                    </div>

                </div>

            </div>
            <div class="refresh-div d-flex align-items-center">
                <span class="refresh-icon" (click)="RefreshList()" style="cursor:pointer;">
                    <svg enable-background="new 0 0 24 24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <g id="timeline" />
                        <g id="navigation" />
                        <g id="align_center" />
                        <g id="align_left_1_" />
                        <g id="align_left" />
                        <g id="more" />
                        <g id="share" />
                        <g id="music" />
                        <g id="camera" />
                        <g id="print" />
                        <g id="wifi_1_" />
                        <g id="setting" />
                        <g id="composed" />
                        <g id="password" />
                        <g id="list" />
                        <g id="voice" />
                        <g id="open_folder" />
                        <g id="refresh">
                            <path
                                d="m19.6025 12.6348c-.5586-.085-1.0547.2979-1.1348.8438-.2012 1.3711-.834 2.6221-1.8301 3.6182-2.5352 2.5352-6.6572 2.5332-9.1914 0-2.5337-2.5342-2.5337-6.6577 0-9.1914.9531-.9526 2.1563-1.5737 3.5029-1.7998.5791-.1099 1.2017-.1289 1.8477-.0557.887.1021 1.7126.3964 2.466.8285l-1.3019.2223c-.5439.0933-.9102.6099-.8164 1.1543.083.4873.5059.8315.9844.8315.0557 0 .1123-.0044.1699-.0142l3.4902-.5967c.2607-.0449.4941-.1914.6475-.4082.1533-.2163.2139-.4849.1689-.7466l-.5977-3.4897c-.0918-.5439-.6016-.9082-1.1543-.8169-.5439.0933-.9102.6104-.8164 1.1548l.1573.9185c-.9679-.543-2.0356-.8943-3.17-1.0249-.8496-.0967-1.6738-.0698-2.4282.0747-1.7368.291-3.3149 1.105-4.564 2.354-3.3135 3.3135-3.3135 8.7051 0 12.0195 1.6567 1.6572 3.8335 2.4854 6.0098 2.4854 2.1768 0 4.3525-.8281 6.0098-2.4854 1.3018-1.3018 2.1299-2.9414 2.3945-4.7412.0802-.5469-.2978-1.0548-.8437-1.1348z" />
                        </g>
                        <g id="link" />
                        <g id="attach" />
                        <g id="email" />
                        <g id="bookmark" />
                        <g id="folder" />
                        <g id="file" />
                        <g id="notification" />
                        <g id="galery" />
                        <g id="delete_1_" />
                        <g id="update" />
                        <g id="upload" />
                        <g id="download" />
                        <g id="menu" />
                        <g id="down" />
                        <g id="up" />
                        <g id="backward" />
                        <g id="forward" />
                        <g id="zoom_out" />
                        <g id="zoom_in" />
                        <g id="search" />
                        <g id="home" />
                        <g id="user" />
                        <g id="guide" />
                    </svg>
                </span>
                <div class="refresh-desc">
                    <h6>{{"REFRESHLIST" | translate}}</h6>
                    <p>{{ "LASTSYNCED" | translate }}
                        {{
                        pageSyncService.lastSyncPledgeTime
                        | donaryDateFormat : "long-medium"
                        }}</p>
                </div>
            </div>
            <div class="fields_opts">
                <ng-container *appIsWeb>
                    <div class="dropdown field_nwdsgn tbl_field">
                        <button id="dLabel" type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"
                            aria-haspopup="true" aria-expanded="false">
                            <i class="fas fa-tag"> <span> {{'FIELDS' |translate}}</span></i>
                        </button>
                        <ul class="dropdown-menu multi-level field_dropdown" role="menu" aria-labelledby="dropdownMenu"
                            cdkDropList (cdkDropListDropped)="drop($event)">
                            <li class="dropdown" style="list-style:none;" cdkDrag
                                [cdkDragDisabled]="objcolField.disabled" (click)="$event.stopPropagation();"
                                *ngFor="let objcolField of colFields; let i=index">
                                <div class="fieldlst_chkbox" style="padding-left: 50px;"
                                    [ngClass]="{'hidefield': objcolField.disabled ==true}">
                                    <input type="checkbox" [disabled]="objcolField.disabled" class="fields_chkbx"
                                        class="" [(ngModel)]="objcolField.isVisible"
                                        (change)="setGridColVisibility($event,objcolField.colName,objcolField.isVisible)"
                                        [id]="objcolField.colId">
                                    <label class="fields_lbl" [for]="objcolField.colId">{{objcolField.colName
                                        |translate}}</label>
                                </div>
                            </li>
                        </ul>
                    </div>
                    <div class="dropdown dropleft extra_opts">
                        <button type="button" appHoverTooltip labelText="{{'MOREACTIONS' | translate}}"
                            class="btn btn-default" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            <span>...</span>
                        </button>
                        <ul class="dropdown-menu multi-level" role="menu" aria-labelledby="dropdownMenu">
                            <li class="dropdown">
                                <a class="dropdown-item" data-toggle="modal" data-target="#import-data-pledge"><i
                                        class="fas fa-file-import"></i> {{'IMPORT' |translate}}</a>
                            </li>
                            <hr class="seprator" />
                            <li class="dropdown"><a class="dropdown-item"
                                    [ngClass]="{'opacity-50':gridFilterData == null ||gridFilterData.length == 0 }"
                                    (click)="gridFilterData != null && gridFilterData.length > 0 && downloadExcel()"><i
                                        class="fas fa-file-excel"></i> {{'EXCEL'|translate}}</a></li>
                            <li class="dropdown">
                                <a class="dropdown-item" (click)="SaveLayout()"><i class="fa fa-tags"></i> {{
                                    "SAVELAYOUT" |
                                    translate }}</a>
                            </li>
                        </ul>
                    </div>
                </ng-container>
            </div>
        </div>
        <ng-container *appIsMobile>
            <div class="summary-block align-items-center justify-content-between">
                <h4>Summary</h4>
                <div class="subby_dropdown">
                    <span>{{'SUMBY' |translate}}:</span>
                    <div class="custo_selct">
                        <angular2-multiselect id="ddlCardType"
                            [settings]="commonMethodService.setDropDownSettings('',1,false,true,true)"
                            [data]="cardFilter" (onSelect)="cardTypeChange(cardType)" [(ngModel)]="cardType">
                            <c-item>
                                <ng-template let-item="item">
                                    <label>{{item.itemName}}</label>
                                    <span class="count_span">({{item.counts}})</span>
                                </ng-template>
                            </c-item>
                        </angular2-multiselect>
                    </div>
                </div>
            </div>
        </ng-container>
        <!-- Card Type Chip -->
        <div class="row cards--parent-row">
            <div class="col-12">

                <!-- chip cards with slider -->
                <ngx-slick class="carousel sumcard-wrapper" #slickModal="slick-modal" [config]="slideConfig"
                    *ngIf="paymentTypeChipData">
                    <ng-container *ngFor="let item of paymentTypeChipData; let i = index">
                        <ng-container *ngIf="i % 6 == 0">
                            <div ngxSlickItem class="slide">
                                <div class="row parent_cardchip">
                                    <div *ngIf="i + 0 < paymentTypeChipData.length">
                                        <ng-template [ngTemplateOutlet]="chipCardTemp"
                                            [ngTemplateOutletContext]="{item: paymentTypeChipData[i + 0]}"></ng-template>
                                    </div>
                                    <div *ngIf="i + 1 < paymentTypeChipData.length">
                                        <ng-template [ngTemplateOutlet]="chipCardTemp"
                                            [ngTemplateOutletContext]="{item: paymentTypeChipData[i + 1]}"></ng-template>
                                    </div>
                                    <div *ngIf="i + 2 < paymentTypeChipData.length">
                                        <ng-template [ngTemplateOutlet]="chipCardTemp"
                                            [ngTemplateOutletContext]="{item: paymentTypeChipData[i + 2]}"></ng-template>
                                    </div>
                                    <div *ngIf="i + 3 < paymentTypeChipData.length">
                                        <ng-template [ngTemplateOutlet]="chipCardTemp"
                                            [ngTemplateOutletContext]="{item: paymentTypeChipData[i + 3]}"></ng-template>
                                    </div>
                                    <div *ngIf="i + 4 < paymentTypeChipData.length">
                                        <ng-template [ngTemplateOutlet]="chipCardTemp"
                                            [ngTemplateOutletContext]="{item: paymentTypeChipData[i + 4]}"></ng-template>
                                    </div>
                                    <div *ngIf="i + 5 < paymentTypeChipData.length">
                                        <ng-template [ngTemplateOutlet]="chipCardTemp"
                                            [ngTemplateOutletContext]="{item: paymentTypeChipData[i + 5]}"></ng-template>
                                    </div>

                                </div>
                            </div>

                        </ng-container>
                    </ng-container>
                </ngx-slick>
                <ng-container *appIsMobile>
                    <div class="filters__options">
                        <div class="fields_opts">
                            <button class="btn-listing">
                                <img src="/assets/dist/img/icon-list.svg" alt="List" />
                            </button>
                            <div class="sort_sumcard">
                                <span class="sorting_icon"></span>
                                <div class="custo_selct sort_drpdown">
                                    <angular2-multiselect id="ddlCardType"
                                        [settings]="commonMethodService.setDropDownSettings('',1,false,true,true)"
                                        [data]="sortFilter" (onSelect)="changeSortType(sortType)"
                                        [(ngModel)]="sortType">
                                    </angular2-multiselect>
                                </div>
                            </div>
                            <div class="dropdown dropleft extra_opts">
                                <button type="button" appHoverTooltip labelText="{{'MOREACTIONS' | translate}}"
                                    class="btn btn-default" data-toggle="dropdown" aria-haspopup="true"
                                    aria-expanded="false">
                                    <span>...</span>
                                </button>
                                <ul class="dropdown-menu multi-level" role="menu" aria-labelledby="dropdownMenu">
                                    <li class="dropdown">
                                        <a class="dropdown-item" data-toggle="modal"
                                            data-target="#import-data-pledge"><i class="fas fa-file-import"></i>
                                            {{'IMPORT' |translate}}</a>
                                    </li>
                                    <hr class="seprator" />
                                    <li class="dropdown"><a class="dropdown-item" (click)="downloadExcel()"><i
                                                class="fas fa-file-excel"></i> {{'EXCEL'|translate}}</a></li>
                                    <li class="dropdown">
                                        <a class="dropdown-item" (click)="SaveLayout()"><i class="fa fa-tags"></i> {{
                                            "SAVELAYOUT" | translate }}</a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </ng-container>
            </div>
        </div>
        <div class="row action_list">
            <span class="action_lbl" *ngIf="isSelected">{{'ACTIONS'|translate}}: </span>
            <div class="custom_action" *ngIf="isSelected">
                <span data-toggle="tooltip" appHoverTooltip labelText="{{'EDIT' | translate}}" class="icn_edit"
                    (click)="editTransactionInfoPopup()"></span>
                <span class="icn_text_receipt" data-toggle="tooltip" appHoverTooltip
                    labelText="{{ 'PRINT' | translate}} {{'PLEDGE' | translate}}"
                    (click)="AdvancePrintReceipt()"></span>
                <span class="icn_text_msg" data-toggle="tooltip" appHoverTooltip
                    labelText="{{'TEXT' | translate}} {{'PLEDGE' | translate}}"
                    (click)="AdvanceSMSReceiptAction()"></span>
                <span class="icn_mail" data-toggle="tooltip" appHoverTooltip
                    labelText="{{'EMAIL' | translate}} {{'PLEDGE' | translate}}"
                    (click)="AdvanceEmailReceiptAction()"></span>
                <span class="icn_message" data-toggle="tooltip" appHoverTooltip
                    labelText="{{'MAIL' | translate}} {{'PLEDGE' | translate}}"
                    (click)="AdvanceMailReceiptAction()"></span>
                <span class="icn_block" data-toggle="tooltip" appHoverTooltip [class.isVoidPledge]="isdisableVoidPledge"
                    [labelText]="!isdisableVoidPledge ? ('VOID' | translate) + ' '+ ('PLEDGE' | translate) : 'Some of the pledges are applied to an aliya and can only be voided in the aliya popup'"
                    (click)="!isdisableVoidPledge  && AdvanceVoidPledgeAction()"></span>
                <span class="icn_block" data-toggle="tooltip" appHoverTooltip [class.isVoidPledge]="isdisableVoidPledge"
                    [labelText]="!isdisableVoidPledge ? ('VOID' | translate) + ' '+ ('PLEDGE' | translate) : 'Some of the pledges are applied to an aliya and can only be voided in the aliya popup'"
                    (click)="!isdisableVoidPledge  && AdvanceVoidPledgeAction()"></span>
                <span class="icn_labels" data-toggle="tooltip" appHoverTooltip
                    labelText="{{'GENERATEREPORT' | translate}}" (click)="onPledgeCustomReport()"></span>
                <span class="icn_advance" data-toggle="tooltip" appHoverTooltip
                    labelText="{{'ADVANCEACTION' | translate}}" (click)="AdvanceReceiptAction()">Advance</span>
            </div>
        </div>

        <!-- Table -->
        <ng-container *appIsWeb>
            <div class="tbl_colm_sticky pldge_tbl" [ngClass]="{'select_action':isSelected==true}" id="print_trans_div">
                <div class="modal_custom px-0 table-responsive transaction__table">
                    <div style="overflow-y: hidden; height: calc(100vh - 15rem);">
                        <div class="px-2" id="pledgeTypePayment" style="overflow-y: auto; height: 100%;">
                            <table class="table-striped  redesign_table table-resizable" [svData]="gridFilterData"
                                #sv="svDataTable" [svRowsOnPage]="25" svSortBy="createdDate" svSortOrder="desc">
                                <thead>
                                    <tr>
                                        <th>
                                            <div class="select-popup" *ngIf="isSelectPopupShow"
                                                (clickOutside)="selectPopupClose()">
                                                <ul>
                                                    <li>
                                                        <input type="radio" name="select" id="select-page"
                                                            (change)="selectThisPage($event)" />
                                                        <label for="select-page">{{'SELECTTHISPAGE' |
                                                            translate}}</label>
                                                        <span class="select-count">{{displayThisPageCount}}</span>
                                                    </li>
                                                    <li>
                                                        <input type="radio" name="select" id="select-all"
                                                            (change)="selectRecord($event, 'selectAll', null)" />
                                                        <label for="select-all">{{'SELECT' | translate}} {{'ALL' |
                                                            translate}}</label>
                                                        <span class="select-count">{{gridFilterData.length}}</span>
                                                    </li>
                                                </ul>
                                            </div>

                                        <input type="checkbox" appHoverTooltip labelText="{{ 'SELECT' | translate}}"
                                            name="selectAll" id="pldg_select_all" (change)="selectPopupOpen($event)"
                                            [checked]="isBulkCheckbox" />
                                        <label for="pldg_select_all" class="custom-checkbox"></label>
                                    </th>
                                    <ng-container *ngFor="let objHeader of headerList; let i=index">
                                        <th resizable *ngIf="checkVisibility(objHeader.colName)">
                                            <sv-default-sorter [by]="objHeader.sortName">{{ objHeader.colName |
                                                translate}}
                                            </sv-default-sorter>
                                        </th>
                                    </ng-container>
                                </tr>
                            </thead>
                            <tbody *ngIf="sv.data?.length > 0">
                                <tr *ngFor="let item of sv.data; let i=index" tabindex={{i}}
                                    class="table-row table-row-{{i}}">
                                    <td><input #checkboxes id="{{item.pledgeID}} " type="checkbox" name="singlecheck"
                                            (change)="selectRecord($event,'singlecheck',item.pledgeID,item)"
                                            [checked]="checkselectRecord(item.pledgeID)" />
                                        <label for="{{item.pledgeID}}" class="custom-checkbox"></label>
                                        <span class="tooltip-custom">{{'SELECT'|translate}}</span>
                                    </td>
                                    <ng-container *ngFor="let objHeader of headerList;">
                                        <ng-container *ngIf="checkVisibility(objHeader.colName)">
                                            <td *ngIf="objHeader.sortName=='pledgeNum'"
                                                (click)="openPledgeCardPopup(item.pledgeID)"
                                                class="blueviolet">{{ item.pledgeNum }}</td>
                                            <td *ngIf="objHeader.sortName=='pledgeDate'">{{ item.pledgeDate | donaryDateFormat: "short" }}</td>
                                            <td [title]="item.fullNameJewish" class="lng_hebrew hebrew_font"
                                                *ngIf="objHeader.sortName=='fullNameJewish'"
                                                (click)="openDonorCardPopup(item.accountID)">
                                                {{ item.fullNameJewish }}
                                            </td>
                                            <td *ngIf="objHeader.sortName=='createdDate'">{{ item.createdDate | donaryDateFormat: "long" }}</td>
                                            <td *ngIf="objHeader.sortName=='pledgeAmount'">{{
                                                commonMethodService.formatAmount(item.pledgeAmount) }}</td>
                                            <td *ngIf="objHeader.sortName=='pledgePaidAmount'">{{
                                                commonMethodService.formatAmount(item.pledgePaidAmount) }}</td>
                                            <td *ngIf="objHeader.sortName=='balance'">{{
                                                commonMethodService.formatAmount(item.balance) }}</td>
                                            <td *ngIf="objHeader.sortName=='pledgeJewishDate'">{{ item.pledgeJewishDate
                                                }}</td>
                                            <td *ngIf="objHeader.sortName=='status'"><span
                                                    [ngClass]="item.status_class">{{ item.status }} </span></td>
                                            <td *ngIf="objHeader.sortName=='scheduleNum'"
                                                class="blueviolet"
                                                (click)="openSchedulePledgeCardPopup(item.scheduleID)">{{
                                                item.scheduleNum }} </td>
                                            <td *ngIf="objHeader.sortName=='scheduleInfo'">{{
                                                commonMethodService.formatAmount(item.pledgeAmount) }} </td>
                                            <td *ngIf="objHeader.sortName=='note'">{{ item.description }} </td>
                                            <td *ngIf="objHeader.sortName=='campaignName'"
                                                (click)="openCampaignCardPopup(item.campaignID)"
                                                class="blueviolet">{{ item.campaignName }}</td>
                                            <td [title]="item.reasonName" *ngIf="objHeader.sortName=='reasonName'"
                                                (click)="openReasonCardPopup(item.reasonID)"
                                                class="blueviolet">
                                                {{ (item.reasonName != null && item.reasonName.length > 18) ?
                                                (item.reasonName | slice:0:18)+'..': (item.reasonName) }}
                                            </td>

                                                <td *ngIf="objHeader.sortName=='reasonNumber'">{{ item.reasonNumber }}
                                                </td>

                                                <td [title]="item.locationName"
                                                    *ngIf="objHeader.sortName=='locationName'"
                                                    (click)="openLocationCardPopup(item.locationID)" class="blueviolet">
                                                    {{ (item.locationName != null && item.locationName.length > 18) ?
                                                    (item.locationName | slice:0:18)+'..': (item.locationName) }}
                                                </td>
                                                <td [title]="item.colectorName"
                                                    *ngIf="objHeader.sortName=='colectorName'"
                                                    (click)="openCollectorCardPopup(item.collectorID)"
                                                    class="blueviolet">
                                                    {{ (item.colectorName != null && item.colectorName.length > 18) ?
                                                    (item.colectorName | slice:0:18)+'..': (item.colectorName) }}
                                                </td>
                                                <td *ngIf="objHeader.sortName=='device'"
                                                    (click)="openDeviceCardPopup(item.deviceId)" class="blueviolet">{{
                                                    item.device }} </td>
                                                <td *ngIf="objHeader.sortName=='accountNum'">{{ item.accountNum }} </td>
                                                <td [title]="item.fullName" *ngIf="objHeader.sortName=='fullName'"
                                                    (click)="openDonorCardPopup(item.accountID)" class="blueviolet">
                                                    {{ item.fullName }}
                                                </td>
                                                <td *ngIf="objHeader.sortName=='address'">{{ item.address }} </td>
                                                <td *ngIf="objHeader.sortName=='cityStateZip'">{{ item.cityStateZip }}
                                                </td>
                                                <td *ngIf="objHeader.sortName=='phones'"><span
                                                        [innerHTML]="item.phoneNo2 != 'null' ? item.phoneNo2 : ' '"></span>
                                                </td>
                                                <td *ngIf="objHeader.sortName=='emails'"><span
                                                        [innerHTML]="item.emailLabels2 != 'null: null' ? item.emailLabels2 : ' '"></span>
                                                </td>
                                                <td *ngIf="objHeader.sortName=='group'">{{ item.group }} </td>
                                                <td *ngIf="objHeader.sortName=='class'">{{ item.class }} </td>
                                                <td *ngIf="objHeader.sortName=='father'">{{ item.father }} </td>
                                                <td *ngIf="objHeader.sortName=='fatherInLaw'">{{ item.fatherInLaw }}
                                                </td>
                                                <td *ngIf="objHeader.sortName=='externalNote'">{{ item.externalNote }}
                                                </td>
                                                <td *ngIf="objHeader.sortName=='title'">{{ item.title }} </td>
                                                <td *ngIf="objHeader.sortName=='firstName'">{{ item.firstName }} </td>
                                                <td *ngIf="objHeader.sortName=='lastName'">{{ item.lastName }} </td>
                                                <td *ngIf="objHeader.sortName=='titleJewish'">{{ item.titleJewish }}
                                                </td>
                                                <td *ngIf="objHeader.sortName=='firstNameJewish'">{{
                                                    item.firstNameJewish }}
                                                </td>
                                                <td *ngIf="objHeader.sortName=='lastNameJewish'">{{ item.lastNameJewish
                                                    }}
                                                </td>
                                                <td *ngIf="objHeader.sortName=='suffixJewish'">{{ item.suffixJewish }}
                                                </td>
                                            </ng-container>
                                        </ng-container>
                                        <td class="custom_action hover__action">
                                            <div class="float__action" *ngIf="item.globalId!=688008">
                                                <span data-toggle="tooltip" appHoverTooltip
                                                    labelText="{{'EDIT' | translate}} {{'PLEDGE' | translate}}"
                                                    class="icn_edit"
                                                    (click)="openEditPledgePopup(item.pledgeID,item.aliyaGroupId)"></span>
                                                <span class="icn_text_receipt" data-toggle="tooltip" appHoverTooltip
                                                    labelText="{{'PRINT' | translate}} {{'Bill' | translate}}"
                                                    (click)="printReceipt(item.pledgeID)"></span>
                                                <span class="icn_text_msg" data-toggle="tooltip" appHoverTooltip
                                                    labelText=" {{'TEXT' | translate}} {{'Bill' | translate}}"
                                                    (click)="SendTextReceipt(item.pledgeID,item.phoneNumberList,item.accountID)"></span>
                                                <span class="icn_mail" data-toggle="tooltip" appHoverTooltip
                                                    labelText=" {{ 'EMAIL' | translate}} {{'Bill' | translate}}"
                                                    (click)="SendEmailReceipt(item.pledgeID,item.emailList,item.accountID,item.phoneNumberList)"></span>
                                                <span class="icn_message"
                                                    (click)="sendMailReceipt(item.pledgeID,item.accountID,item.address,item.cityStateZip)"
                                                    data-toggle="tooltip" appHoverTooltip
                                                    labelText=" {{ 'MAIL' | translate}} {{'Bill' | translate}}"></span>
                                                <span class="icn_block"
                                                    (click)="(!item.aliyaGroupId) && (VoidPledge(item.pledgeID,item.accountID))"
                                                    data-toggle="tooltip" appHoverTooltip
                                                    [ngStyle]="item.aliyaGroupId ? { opacity: '0.5' } : null"
                                                    [labelText]="!item.aliyaGroupId ? ('VOID' | translate) + ' '+ ('PLEDGE' | translate) : 'The pledge is applied to an aliya and can only be voided in the aliya popup'"></span>
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                                <tbody *ngIf="sv.data?.length == 0">
                                    <tr>
                                        <td colspan="15" style="text-align: center;">{{'NODATAFOUND'|translate}}
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            <div class="new_tblfoot">
                <div class="show_entry"> <span class="total_record">{{'SHOWING'|translate}} <span
                            *ngIf="isFiltered"><strong>{{filterRecord}}</strong> {{'OF'|translate}} </span>
                        <strong>{{totalRecord}}</strong> {{'RECORDS'|translate}}</span>
                    <div class="show_entry">
                        <span class="total_record">
                            {{'SELECTED'|translate}}
                            <strong>{{totalSelectedShow()}}</strong>
                            {{'RECORDS'|translate}}
                        </span>
                    </div>
                    <div class="custom_pagination">
                        <sv-bootstrap-paginator [svTable]="sv" [rowsOnPageSet]="[25, 50, 100]">
                        </sv-bootstrap-paginator>
                    </div>
                </div>
            </div>
        </ng-container>

        <ng-container *ngIf="(isMobile | async)?.matches;">
            <ng-template [ngTemplateOutlet]="mobileIn"></ng-template>
        </ng-container>

    </div>
    <div *ngIf="isloading" class="overlay">
        <i class="fas fa-2x fa-sync-alt fa-spin"></i>
    </div>
</div>
<ng-template #chipCardTemp let-item="item">
    <div class="col-3 item sumcard-items" *ngIf="item">
        <div [class]="item.paymentTypeChipCSSClass" (click)="GetPledgeTransByPaymentChipType(item)">
            <div class="info-box-content">
                <div class="row">
                    <div class="col-12 top_value">
                        <span class="info-box-text" [title]="item.paymentType">{{ item.paymentType }}</span>
                        <span class="info-box-count ">({{item.paymentCount}}) </span>
                    </div>
                    <div class="data-list">
                        <ul>
                            <li>
                                <div class="data-title-row">
                                    <label>{{'ALL'|translate}}</label>
                                </div>
                                <div class="data-price-row">
                                    <label>{{commonMethodService.formatAmount(item.totalAmount)}}</label>
                                </div>
                            </li>
                            <li>
                                <div class="data-title-row">
                                    <label>{{'PAID'|translate}}</label>
                                </div>
                                <div class="data-price-row">
                                    <label>{{commonMethodService.formatAmount(item.paid)}}</label>
                                </div>
                            </li>
                            <li>
                                <div class="data-title-row">
                                    <label>{{'OPEN'|translate}}</label>
                                </div>
                                <div class="data-price-row">
                                    <label>{{commonMethodService.formatAmount(item.open)}}</label>
                                </div>
                            </li>
                        </ul>
                    </div>

                </div>
            </div>
        </div>
    </div>
</ng-template>
<!-- The Modal -->
<div class="modal fade import-doc" id="import-data-pledge">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">

            <!-- Modal Header -->
            <div class="modal-header ui-draggable-handle">
                <h4 class="modal-title">{{'IMPORT' | translate}} {{'PLEDGES' | translate}}</h4>
                <button type="button" class="close" data-dismiss="modal" (click)="reseteFile()">&times;</button>
            </div>

            <!-- Modal body -->
            <div class="modal-body">
                <div class="import-doc-body">
                    <div id="other" class="file-drop-area {{changeText}}" draggable="true"
                        (dragstart)="changeText='is-active'" (drag)="changeText='is-active'"
                        (dragover)="changeText='is-active'" (drop)="changeText='is-active'" (dragend)="changeText=''">
                        <div id="NotReadyToUploadPledge" class="file-not-ready">
                            <span class="file-msg text-center"><i class="cloud-upload"></i>{{'DRAGFILEUPLOAD' |
                                translate}}</span>
                            <label class="file-devider">{{'OR' | translate}}</label>
                            <input class="file-input" type="file" name="doc_file" id="doc_filePledge"
                                (change)="incomingfile($event)" placeholder="Upload file" accept=".xlsx">
                            <span class="fake-btn">{{'CHOOSEFILE' | translate}}</span>
                        </div>
                        <div id="readyToUploadPledge" class="file-ready" style="display: none;">
                            <span class="file-msg text-center"><i class="cloud-upload"></i> {{'FILEREADY' |
                                translate}}</span>
                            <div class="label-download">
                                <button class="download-excel-tem">{{ fileName }}</button>
                            </div>
                        </div>
                    </div>
                    <div class="label-download"><button (click)="downloadExcelTemplate($event)"
                            class="download-excel-tem"><i class="xls-file"></i>
                            {{'DOWNLOADEXCEL' | translate}}</button></div>
                </div>
            </div>

            <!-- Modal footer -->
            <div class="modal-footer">
                <button type="button" data-dismiss="modal" class="btn btn-default" (click)="reseteFile()">{{'CANCEL' |
                    translate}}</button>
                <button type="button" class="btn btn-primary" (click)="uploadExcelTemplate()">{{'UPLOAD' |
                    translate}}</button>
            </div>
            <div *ngIf="isloadingModel" class="overlay">
                <i class="fas fa-2x fa-sync-alt fa-spin"></i>
            </div>
        </div>
    </div>
</div>


<ng-template #mobileIn>
    <div class="payment-listing">
        <ul>
            <li *ngFor="let data of gridFilterData" (click)="openPledgeCardPopup(data.pledgeID)">
                <div class="donor-row d-flex justify-content-between">
                    <div class="donor-col">

                        <h4 class="donor-name"> {{data.fullNameJewish}}</h4>
                    </div>
                    <div class="donor-col">
                        <span class="donor-price">#{{data.pledgeNum}}</span>
                    </div>

                    <div class="donor-col">
                        <span class="pledge-status" [ngClass]="data.status_class">{{ data.status }}</span>
                    </div>

                </div>
                <div class="donor-row d-flex justify-content-between">
                    <div class="donor-col">
                        <div class="donor-time">
                            <span class="donor-date"> {{dateformat(data.pledgeDate)}}</span>
                            <span class="donor-pledgeJewishDate">{{data.pledgeJewishDate}}</span>

                        </div>
                    </div>
                    <div class="donor-col">
                        <span class="donor-label">AMOUNT:</span>
                    </div>
                    <div class="donor-col">
                        <span class="donor-text">{{commonMethodService.formatAmount(data.pledgeAmount)}}</span>
                    </div>
                </div>
                <div class="donor-row d-flex justify-content-between">
                    <div class="donor-col payment-category">
                        <div class="payment-campaign">
                            <div *ngIf="data.campaignName != null && data.campaignName != ''; else campaignNullData">
                                <label>CAMPAIGN:</label>
                                <span [ngClass]="{'hebrew-text': containsHebrewCharacters(data.campaignName)}">{{
                                    data.campaignName }}</span>
                            </div>
                            <ng-template #campaignNullData>
                                <label>CAMPAIGN:</label>
                                <span>-</span>
                            </ng-template>
                        </div>
                    </div>
                    <div class="donor-col">
                        <span class="donor-label">PAID:</span>
                    </div>
                    <div class="donor-col">
                        <span class="donor-text">{{commonMethodService.formatAmount(data.pledgePaidAmount)}}</span>
                    </div>
                </div>
                <div class="donor-row d-flex justify-content-between">
                    <div class="donor-col payment-category">
                        <div class="payment-reason">
                            <div *ngIf="data.reasonName != null && data.campaignName != ''; else reasonNullData">
                                <label>REASON:</label>
                                <span [ngClass]="{'hebrew-text': containsHebrewCharacters(data.reasonName)}">{{
                                    data.reasonName }}</span>
                            </div>
                            <ng-template #reasonNullData>
                                <label>REASON:</label>
                                <span>-</span>
                            </ng-template>
                        </div>
                    </div>
                    <div class="donor-col">
                        <span class="donor-label">BALANCE:</span>
                    </div>
                    <div class="donor-col">
                        <span class="donor-text"><b>{{commonMethodService.formatAmount(data.balance)}}</b></span>
                    </div>
                </div>
            </li>
        </ul>
    </div>
</ng-template>